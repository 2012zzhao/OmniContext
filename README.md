# OmniContext

Seamlessly share chat context across different AI assistants (including Doubao and more) with conversation auto-captures and one-click context injection.

åœ¨ä¸åŒAIåŠ©æ‰‹é—´æ— ç¼å…±äº«å¯¹è¯ä¸Šä¸‹æ–‡ï¼Œæ”¯æŒè±†åŒ…ã€å…ƒå®ã€Claudeç­‰å¹³å°ï¼Œè‡ªåŠ¨æ•è·èŠå¤©è®°å½•ï¼Œä¸€é”®æ³¨å…¥ä¸Šä¸‹æ–‡ï¼Œè®©AIåä½œæ›´è¿è´¯ã€‚

---

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **å¤šå¹³å°æ”¯æŒ** - è±†åŒ…ã€å…ƒå®ã€Claude ç­‰ä¸»æµAIåŠ©æ‰‹
- ğŸ’¾ **è‡ªåŠ¨æ•è·** - è®¿é—®å¹³å°æ—¶è‡ªåŠ¨è®°å½•å¯¹è¯å†å²
- ğŸ“‹ **ä¸€é”®æ³¨å…¥** - é€‰æ‹©å†å²ä¼šè¯ï¼Œæ ¼å¼åŒ–å¤åˆ¶åˆ°å‰ªè´´æ¿
- ğŸ”’ **æœ¬åœ°å­˜å‚¨** - æ•°æ®ä»…å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ï¼Œéšç§ä¼˜å…ˆ
- ğŸ“¤ **æ•°æ®å¯¼å‡º** - æ”¯æŒJSONæ ¼å¼å¤‡ä»½

---

## å®‰è£…ä½¿ç”¨

### å¼€å‘æ¨¡å¼åŠ è½½

1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/2012zzhao/OmniContext.git
cd OmniContext
npm install
npm run build
```

2. ChromeåŠ è½½æ‰©å±•
- æ‰“å¼€ `chrome://extensions/`
- å¼€å¯ã€Œå¼€å‘è€…æ¨¡å¼ã€
- ç‚¹å‡»ã€ŒåŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åºã€
- é€‰æ‹© `dist` ç›®å½•

### ä½¿ç”¨æµç¨‹

1. åœ¨è±†åŒ…/å…ƒå®/Claude æ­£å¸¸èŠå¤©
2. ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ çš„ ğŸ§  å›¾æ ‡
3. é€‰æ‹©ä¹‹å‰çš„ä¼šè¯ï¼Œç‚¹å‡» ğŸ“‹ å¤åˆ¶ä¸Šä¸‹æ–‡
4. ç²˜è´´åˆ°ç›®æ ‡AIåŠ©æ‰‹çš„è¾“å…¥æ¡†

---

## é¡¹ç›®ç»“æ„

```
OmniContext/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ background/          # åå°æœåŠ¡ (Service Worker)
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ content/             # å†…å®¹è„šæœ¬ (é¡µé¢æ³¨å…¥)
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ popup/               # å¼¹çª—UI
â”‚   â”‚   â”œâ”€â”€ index.html
â”‚   â”‚   â”œâ”€â”€ index.ts
â”‚   â”‚   â””â”€â”€ style.css
â”‚   â”œâ”€â”€ storage/             # IndexedDBå­˜å‚¨å°è£…
â”‚   â”‚   â””â”€â”€ session-storage.ts
â”‚   â”œâ”€â”€ types/               # TypeScriptç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ extractor.ts     # DOMæå–å™¨
â”‚       â””â”€â”€ formatter.ts     # æ ¼å¼åŒ–è¾“å‡º
â”œâ”€â”€ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ storage.test.ts
â”‚   â”œâ”€â”€ extractor.test.ts
â”‚   â””â”€â”€ formatter.test.ts
â”œâ”€â”€ project/                 # é¡¹ç›®ç®¡ç†æ–‡æ¡£
â”‚   â”œâ”€â”€ worklog.md           # å·¥ä½œæ—¥å¿—
â”‚   â””â”€â”€ designs.md           # äº§å“è®¾è®¡
â”œâ”€â”€ manifest.json            # æ‰©å±•é…ç½®
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

---

## è½¯ä»¶æ¶æ„

### Chrome Extension MV3 æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Chrome Extension              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Content â”‚ â”‚Backgroundâ”‚ â”‚  Popup   â”‚ â”‚
â”‚  â”‚ Script  â”‚ â”‚  Script  â”‚ â”‚   UI     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚              chrome.storage              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

```
AIå¹³å°é¡µé¢ â†’ Content Script â†’ Extractor â†’ Storage â†’ Popupæ˜¾ç¤º â†’ å¤åˆ¶æ³¨å…¥
```

### æ ¸å¿ƒæ¨¡å—

| æ¨¡å— | èŒè´£ |
|------|------|
| Content Script | é¡µé¢DOMç›‘å¬ã€æ¶ˆæ¯æå–ã€è‡ªåŠ¨ä¿å­˜ |
| Background | æ‰©å±•ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€å›¾æ ‡çŠ¶æ€æ›´æ–° |
| Popup | ç”¨æˆ·ç•Œé¢ã€ä¼šè¯ç®¡ç†ã€æ“ä½œäº¤äº’ |
| Storage | IndexedDBå°è£…ã€Session CRUD |
| Extractor | å¹³å°ç‰¹å®šé€‰æ‹©å™¨ã€DOMè§£æ |
| Formatter | æ ¼å¼åŒ–è¾“å‡ºã€å‰ªè´´æ¿æ“ä½œ |

---

## å¼€å‘

### æŠ€æœ¯æ ˆ

- **æ„å»º**: Vite + @crxjs/vite-plugin
- **è¯­è¨€**: TypeScript
- **æµ‹è¯•**: Vitest + jsdom
- **æ ·å¼**: åŸç”ŸCSS

### å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»º
npm run build

# æµ‹è¯•
npm test

# ç”Ÿäº§æ„å»º
npm run build
```

### æµ‹è¯•

é¡¹ç›®é‡‡ç”¨TDDå¼€å‘ï¼Œæ‰€æœ‰æ ¸å¿ƒæ¨¡å—å‡æœ‰æµ‹è¯•è¦†ç›–ï¼š

```
âœ“ storage.test.ts    9 tests
âœ“ extractor.test.ts  18 tests
âœ“ formatter.test.ts  8 tests
```

---

## æ”¯æŒå¹³å°

| å¹³å° | çŠ¶æ€ | å¤‡æ³¨ |
|------|------|------|
| è±†åŒ… (Doubao) | âœ… | å®Œæ•´æ”¯æŒCSS Modulesè§£æ |
| å…ƒå® (Yuanbao) | ğŸš§ | åŸºç¡€æ”¯æŒ |
| Claude | ğŸš§ | åŸºç¡€æ”¯æŒ |

---

## æ•°æ®æ¨¡å‹

### Session
```typescript
interface Session {
  id: string;              // å”¯ä¸€æ ‡è¯†
  platform: Platform;      // å¹³å°ç±»å‹
  title: string;           // ä¼šè¯æ ‡é¢˜
  sourceUrl: string;       // æ¥æºé“¾æ¥
  createdAt: number;       // åˆ›å»ºæ—¶é—´
  updatedAt: number;       // æ›´æ–°æ—¶é—´
  messages: Message[];     // æ¶ˆæ¯åˆ—è¡¨
  messageCount: number;    // æ¶ˆæ¯æ•°é‡
}
```

### Message
```typescript
interface Message {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: number;
}
```

---

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ PRï¼

---

## è®¸å¯

MIT License
