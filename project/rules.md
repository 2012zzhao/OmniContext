# OmniContext 开发规范

> 倒排式记录，最新记录在最上方。只增不减。

---

## 2026-02-28 项目文档管理规范

**摘要：** project/ 目录只保留四个核心文档，所有内容归类归档

**正文：**

### 目录结构

`project/` 目录只保留以下四个文档：

| 文件 | 用途 | 内容 |
|------|------|------|
| `rules.md` | 开发规范 | 代码规范、流程规范、命名规范等 |
| `designs.md` | 设计文档 | 功能设计、UI设计、架构设计等 |
| `roadmap.md` | 产品路线图 | 版本规划、功能排期、里程碑等 |
| `worklog.md` | 工作日志 | 每日进展、问题记录、决策记录等 |

### 内容归档规则

1. **不再创建新文档** - 所有内容记录到上述四个文档中
2. **按需追加** - 在对应文档中追加新内容，不创建独立文件
3. **旧文档清理** - 已存在的其他文档应合并到对应文档后删除

### 文档更新规范

- 规则/规范 → `rules.md`
- 功能设计/UI设计 → `designs.md`
- 版本规划/功能排期 → `roadmap.md`
- 开发进展/问题记录 → `worklog.md`

---

## 2026-02-27 版本发布规范

**摘要：** 每次成功的更新都必须推送到 GitHub 仓库

**正文：**

### 强制要求

1. **代码更新 → GitHub 推送**
   - 每次修复 bug 或添加功能 → 必须 `git push`
   - 更新 `product/` 构建产物 → 必须 `git push`
   - 更新文档 → 必须 `git push`

2. **提交信息规范**
   ```
   type: description

   - fix: 修复 bug
   - feat: 新功能
   - docs: 文档更新
   - chore: 构建/工具更新
   ```

3. **推送检查清单**
   - [ ] 代码已提交 (`git commit`)
   - [ ] 构建产物已更新 (`product/`)
   - [ ] 已推送到 GitHub (`git push origin main`)
   - [ ] GitHub 上能看到最新提交

### 目的

- 保持代码仓库最新
- 方便多设备同步
- 确保 `product/` 目录可直接使用

---

## 2026-02-27 跨平台兼容性规范

**摘要：** 明确项目兼容性要求

**正文：**

### 支持平台

| 维度 | 要求 | 备注 |
|------|------|------|
| **操作系统** | Windows, macOS | 必须同时兼容 |
| **浏览器** | Chrome | 当前主要目标 |
| **浏览器版本** | 最新两个主版本 | Chrome 120+ |

### 开发注意事项

1. **路径处理**
   - 使用 `/` 而非 `\`（构建工具会自动处理）
   - 避免硬编码平台特定路径

2. **文件系统**
   - 文件名大小写敏感（macOS/Linux 默认敏感）
   - 避免使用 Windows 保留字符（`:`, `*`, `?`, `"`, `<`, `>`, `|`）

3. **DOM 操作**
   - 不同平台可能有不同的渲染时机
   - 添加充分的 null/undefined 检查
   - 使用 try-catch 包裹 DOM 查询

4. **存储**
   - 使用 Chrome Storage API（跨平台一致）
   - IndexedDB 在两种平台上行为一致

5. **测试要求**
   - 每个功能必须在 Windows 和 macOS 上验证
   - Console 错误必须在两个平台上排查

---
