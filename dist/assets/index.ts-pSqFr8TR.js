chrome.runtime.onInstalled.addListener(e=>{console.log("[OmniContext] Extension installed",e),chrome.storage.local.get("sessions",t=>{t.sessions||chrome.storage.local.set({sessions:[]})})});chrome.runtime.onMessage.addListener((e,t,o)=>(e.type==="SAVE_SESSION"&&o({success:!0}),!0));chrome.tabs.onActivated.addListener(async e=>{try{const t=await chrome.tabs.get(e.tabId);s(t.url)}catch{}});chrome.tabs.onUpdated.addListener((e,t,o)=>{t.url&&o.active&&s(t.url)});function s(e){if(!e)return;e.includes("doubao.com")||e.includes("yuanbao.tencent.com")||e.includes("claude.ai")?(chrome.action.setBadgeText({text:"‚óè"}),chrome.action.setBadgeBackgroundColor({color:"#52c41a"})):chrome.action.setBadgeText({text:""})}
